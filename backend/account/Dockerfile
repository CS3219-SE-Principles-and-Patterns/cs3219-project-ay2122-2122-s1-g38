# Development only
FROM node:12
WORKDIR /app
COPY package*.json ./
RUN yarn install
COPY . .

ARG CLIENT_URL
ARG DATABASE_URL
ARG DB_SYNCHRONIZE
ARG JWT_ACCESS_TOKEN_SECRET
ARG JWT_REFRESH_TOKEN_SECRET
ARG JWT_MAIL_VERIFY_SECRET
ARG JWT_PASSWORD_RESET_SECRET
ARG environment

ENV CLIENT_URL=${CLIENT_URL}
ENV DATABASE_URL=${DATABASE_URL}
ENV DB_SYNCHRONIZE=${DB_SYNCHRONIZE}
ENV JWT_ACCESS_TOKEN_SECRET=${JWT_ACCESS_TOKEN_SECRET}
ENV JWT_REFRESH_TOKEN_SECRET=${JWT_REFRESH_TOKEN_SECRET}
ENV JWT_MAIL_VERIFY_SECRET=${JWT_MAIL_VERIFY_SECRET}
ENV JWT_PASSWORD_RESET_SECRET=${JWT_PASSWORD_RESET_SECRET}
ENV environment=${environment}

EXPOSE 8081
CMD ["yarn", "start:dev"]
